<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cronaca | Profil de Ezio Auditore</title>
    <style>
        /* --- Polices & Couleurs Inspirées de la Renaissance --- */
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Lora:ital,wght@0,400;0,600;1,400&display=swap');

        :root {
            --font-main: 'Lora', serif;
            --font-headings: 'Cinzel', serif;
            --color-parchment: #f5f0e1;
            --color-dark-text: #3d2b1f;
            --color-red-accent: #8a0303;
            --color-border: #d4c5a5;
            --color-card-bg: #fffbf2;
            --color-interactive: #5a4b3c;
            --color-button-bg: #a30000;
            --color-button-text: #fff;
            --color-button-hover: #b90000;
        }

        /* --- Style Général de la Page --- */
        body {
            font-family: var(--font-main);
            background-color: var(--color-parchment);
            color: var(--color-dark-text);
            margin: 0;
            padding: 0;
            font-size: 16px;
            line-height: 1.6;
        }

        .container {
            max-width: 1000px;
            margin: 20px auto;
            padding: 0 15px;
        }

        h1, h2, h3 {
            font-family: var(--font-headings);
            color: var(--color-red-accent);
            font-weight: 700;
        }
        
        h3 {
            font-size: 1.1em;
            margin-top: 15px;
            margin-bottom: 10px;
            color: var(--color-dark-text);
            border-bottom: 1px solid var(--color-border);
            padding-bottom: 5px;
        }

        /* --- En-tête du Profil --- */
        .profile-header {
            background-color: var(--color-card-bg);
            border: 1px solid var(--color-border);
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            position: relative;
            padding-bottom: 80px; /* Espace pour la moitié de la photo de profil + actions */
        }

        .cover-photo {
            height: 220px;
            background-image: url('https://florencesite.fr/images/que-visiter-a-florence.jpg');
            background-repeat: no-repeat;
            background-position: center 35%;
            background-size: cover;
            border-radius: 8px 8px 0 0;
        }

        .profile-info-wrapper {
            position: absolute;
            bottom: 0;
            left: 30px;
            width: calc(100% - 60px);
        }

        .profile-info {
            display: flex;
            align-items: flex-end;
        }

        .profile-pic {
            width: 160px;
            height: 160px;
            border-radius: 50%;
            border: 5px solid var(--color-card-bg);
            margin-right: 20px;
            object-fit: cover;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            flex-shrink: 0;
            cursor: pointer;
            transition: transform 0.2s ease;
        }
        .profile-pic:hover {
            transform: scale(1.05);
        }

        .profile-name-and-actions {
            flex-grow: 1;
            padding-bottom: 10px;
        }

        .profile-name h1 {
            margin: 0;
            font-size: 2.5em;
            color: white;
            text-shadow: 2px 2px 6px rgba(0, 0, 0, 0.9);
            line-height: 1.1;
        }

        .profile-name .bio-container {
            background: linear-gradient(to right, rgba(0,0,0,0.6), rgba(0,0,0,0));
            padding: 5px 10px 5px 0;
            margin-top: 10px;
            border-radius: 0 5px 5px 0;
            display: inline-block;
        }

        .profile-name .bio {
            font-style: italic;
            margin: 0;
            color: white;
            font-size: 1.1em;
            text-shadow: 1px 1px 4px rgba(0, 0, 0, 0.9);
            display: block;
        }
        
        .profile-name .bio-translation {
            font-style: normal;
            margin: 5px 0 0 0;
            color: #dddddd;
            font-size: 0.85em;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.9);
            display: block;
        }

        .profile-actions {
            margin-top: 15px;
            display: flex;
            gap: 10px;
        }

        .profile-actions .action-button {
            background-color: var(--color-red-accent);
            color: var(--color-button-text);
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-family: var(--font-headings);
            font-size: 1em;
            font-weight: bold;
            transition: background-color 0.2s ease, transform 0.2s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .profile-actions .action-button:hover {
            background-color: var(--color-button-hover);
            transform: translateY(-2px);
        }
        .profile-actions .action-button.toggled {
            background-color: #555;
            cursor: default;
            transform: none;
        }

        /* --- Contenu Principal (deux colonnes) --- */
        .main-content {
            display: flex;
            gap: 20px;
            margin-top: 20px;
        }

        .left-column {
            flex: 0 0 320px;
        }

        .right-column {
            flex: 1;
        }

        /* --- Cartes de Contenu (Détails, Amis, Posts) --- */
        .card {
            background-color: var(--color-card-bg);
            border: 1px solid var(--color-border);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .card h2 {
            margin-top: 0;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--color-border);
        }

        /* --- Section Détails et Compétences --- */
        .details-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .details-list li {
            margin-bottom: 10px;
        }

        .details-list strong {
            color: var(--color-red-accent);
        }

        #competences-list li {
            margin-bottom: 5px;
            padding-left: 10px;
        }

        /* --- Section Album Photos --- */
        .photo-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
        }
        
        .photo-grid img {
            width: 100%;
            aspect-ratio: 1 / 1;
            object-fit: cover;
            border-radius: 4px;
            border: 1px solid var(--color-border);
            cursor: pointer;
            transition: opacity 0.2s;
        }
        .photo-grid img:hover {
            opacity: 0.8;
        }
        
        /* --- Section Pages Aimées --- */
        .liked-pages-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .liked-page-item {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        .liked-page-item:last-child {
            margin-bottom: 0;
        }
        .liked-page-item img {
            width: 50px;
            height: 50px;
            border-radius: 4px;
            object-fit: cover;
            margin-right: 12px;
            border: 1px solid var(--color-border);
        }
        .page-info {
            display: flex;
            flex-direction: column;
        }
        .page-name {
            font-weight: bold;
            color: var(--color-dark-text);
        }
        .page-category {
            font-size: 0.85em;
            color: var(--color-interactive);
        }

        /* --- Section Amis --- */
        .friends-card .friends-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 20px;
        }

        .friends-card .friend-item {
            text-align: center;
        }

        .friends-card .friend-item img {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: 3px solid var(--color-border);
            object-fit: cover;
            transition: transform 0.2s;
        }
        
        .friends-card .friend-item img:hover {
            transform: scale(1.1);
        }

        .friends-card .friend-item .friend-name {
            font-size: 0.9em;
            font-weight: 600;
            margin-top: 5px;
        }
        
        /* --- Section Fil d'actualité --- */
        .post {
            background-color: var(--color-card-bg);
            border: 1px solid var(--color-border);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .post-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .post-author-pic {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            margin-right: 15px;
            object-fit: cover;
        }
        
        .post-author-name {
            font-weight: bold;
            font-family: var(--font-headings);
        }

        .post-date {
            font-size: 0.8em;
            color: #777;
        }
        
        .post-location {
            font-weight: bold;
        }

        .post-content p {
            margin-top: 0;
            margin-bottom: 10px;
        }
        
        .translate-btn {
            background: none;
            border: none;
            color: var(--color-interactive);
            font-size: 0.8em;
            font-style: italic;
            cursor: pointer;
            padding: 0;
            margin-bottom: 10px;
            text-decoration: underline;
        }

        .translate-btn:hover {
            color: var(--color-red-accent);
        }
        
        .post-actions {
            display: flex;
            gap: 10px;
            padding: 10px 0;
            border-top: 1px solid var(--color-border);
            margin-top: 15px;
        }
        
        .action-btn {
            background: none;
            border: none;
            cursor: pointer;
            font-family: var(--font-main);
            font-weight: bold;
            font-size: 0.9em;
            color: var(--color-interactive);
            padding: 5px 10px;
            border-radius: 5px;
            transition: background-color 0.2s;
        }
        
        .action-btn:hover {
            background-color: var(--color-parchment);
        }
        
        .like-btn.liked {
            color: var(--color-red-accent);
        }

        .post-comments {
            margin-top: 15px;
        }
        
        .comment-box {
            display: none;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--color-border);
        }
        
        .comment-thread {
            border-bottom: 1px solid var(--color-border);
            padding-bottom: 12px;
            margin-bottom: 12px;
        }
        .comment-thread:last-child {
            border-bottom: none;
            padding-bottom: 0;
            margin-bottom: 0;
        }
        
        .comment {
            display: flex;
            align-items: flex-start;
            font-size: 0.9em;
            margin-bottom: 8px;
        }
        
        .comment-author-pic {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            margin-right: 10px;
            object-fit: cover;
            flex-shrink: 0;
        }

        .comment-body {
            width: 100%;
        }
        
        .comment strong {
            color: var(--color-red-accent);
        }
        
        .translate-comment-btn {
             background: none;
             border: none;
             font-size: 0.8em;
             color: var(--color-interactive);
             cursor: pointer;
             text-decoration: underline;
             padding-left: 5px;
             font-style: italic;
        }
        
        .comment-actions {
            margin-top: 8px;
            display: flex;
            gap: 15px;
            align-items: center;
        }
        
        .comment-action-btn {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 0.8em;
            color: var(--color-interactive);
            padding: 0;
            font-weight: bold;
        }
        .comment-action-btn:hover {
            text-decoration: underline;
        }
        .comment-like-btn.liked {
            color: var(--color-red-accent);
        }
        
        .comment-reply-container {
            display: none;
            margin-left: 45px;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px dashed var(--color-border);
        }

        .comment-reply-container textarea, .comment-box textarea {
            width: 100%;
            box-sizing: border-box;
            border: 1px solid var(--color-border);
            border-radius: 5px;
            padding: 8px;
            font-family: var(--font-main);
            background-color: #fff;
            min-height: 40px;
            resize: vertical;
        }

        .comment-reply-container button, .comment-box button {
            background-color: var(--color-red-accent);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-family: var(--font-headings);
            margin-top: 8px;
            display: block;
            margin-left: auto;
            font-size: 0.85em;
        }
        
        .comment-reply {
            display: flex;
            align-items: flex-start;
            margin-left: 45px;
            margin-top: 10px;
            margin-bottom: 10px;
            padding-top: 10px;
            border-top: 1px dashed var(--color-border);
            font-size: 0.9em;
        }
        
        .reply-author-pic {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            margin-right: 10px;
        }
        
        .comment-reply strong {
            color: var(--color-red-accent);
            display: block;
        }
        
        .lightbox-modal {
            display: none;
            position: fixed;
            z-index: 1001;
            padding-top: 60px;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.9);
        }
        .lightbox-content {
            margin: auto;
            display: block;
            width: 80%;
            max-width: 700px;
        }
        .lightbox-close {
            position: absolute;
            top: 15px;
            right: 35px;
            color: #f1f1f1;
            font-size: 40px;
            font-weight: bold;
            transition: 0.3s;
            cursor: pointer;
        }
        .lightbox-close:hover,
        .lightbox-close:focus {
            color: #bbb;
            text-decoration: none;
        }

        #chat-fab {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background-color: var(--color-red-accent);
            border-radius: 50%;
            border: 2px solid var(--color-parchment);
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            transition: transform 0.2s ease-in-out;
        }

        #chat-fab:hover {
            transform: scale(1.1);
        }

        #chat-fab svg {
            width: 32px;
            height: 32px;
            fill: var(--color-parchment);
        }

        #chat-modal {
            position: fixed;
            z-index: 999;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            display: none;
            justify-content: center;
            align-items: center;
        }

        .chat-window {
            width: 90%;
            max-width: 400px;
            height: 80vh;
            max-height: 600px;
            background-color: var(--color-parchment);
            border: 2px solid var(--color-border);
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.4);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            font-family: var(--font-main);
        }

        .chat-header {
            padding: 15px;
            background-color: var(--color-card-bg);
            border-bottom: 1px solid var(--color-border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-header h2 {
            margin: 0;
            font-size: 1.2em;
        }
        
        .chat-close-btn {
            font-size: 1.5em;
            cursor: pointer;
            background: none;
            border: none;
            color: var(--color-interactive);
        }
        
        .chat-messages {
            flex-grow: 1;
            padding: 15px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }
        
        .message {
            max-width: 80%;
            padding: 10px 15px;
            border-radius: 15px;
            margin-bottom: 10px;
            line-height: 1.4;
        }

        .message.user {
            background-color: #e1e1e1;
            align-self: flex-end;
            border-bottom-right-radius: 3px;
        }
        
        .message.ezio {
            background-color: var(--color-card-bg);
            border: 1px solid var(--color-border);
            align-self: flex-start;
            border-bottom-left-radius: 3px;
        }

        .chat-input-form {
            display: flex;
            padding: 10px;
            border-top: 1px solid var(--color-border);
            background-color: var(--color-card-bg);
        }

        .chat-input-form input {
            flex-grow: 1;
            border: 1px solid var(--color-border);
            border-radius: 20px;
            padding: 10px 15px;
            font-family: var(--font-main);
            font-size: 1em;
        }
        
        .chat-input-form button {
            background-color: var(--color-red-accent);
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            margin-left: 10px;
            cursor: pointer;
            color: white;
            font-size: 1.2em;
        }
    </style>
</head>
<body>
    <div id="lightbox-modal" class="lightbox-modal">
        <span class="lightbox-close">&times;</span>
        <img class="lightbox-content" id="lightbox-img">
    </div>

    <div class="container">
        <header class="profile-header">
            <div class="cover-photo"></div>
            <div class="profile-info-wrapper">
                <div class="profile-info">
                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRrtuXJl9rlAVu6swHGqy8qvW-ldqFAwG1aBw&s" alt="Portrait de Ezio Auditore" class="profile-pic enlargable">
                    <div class="profile-name-and-actions">
                        <div class="profile-name">
                            <h1>Ezio Auditore da Firenze</h1>
                            <div class="bio-container">
                                <p class="bio">"Nobile Fiorentino, Assassino e Mentore dell'Ordine."</p>
                                <p class="bio-translation">(Noble Florentin, Assassin et Mentor de l'Ordre.)</p>
                            </div>
                        </div>
                        <div class="profile-actions">
                            <button class="action-button" id="add-friend-btn">Ajouter aux amis</button>
                            <button class="action-button" id="follow-btn">Suivre</button>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <main class="main-content">
            <aside class="left-column">
                <div class="card">
                    <h2>Détails Personnels</h2>
                    <ul class="details-list">
                        <li><strong>Né le:</strong> 24 juin 1459</li>
                        <li><strong>Origine:</strong> Florence, République Florentine</li>
                        <li><strong>Résidence:</strong> Villa Auditore | Île Tibérine</li>
                        <li><strong>Profession:</strong> Maître Assassin</li>
                        <li><strong>Famille:</strong> Maison Auditore</li>
                        <li><strong>Situation:</strong> Marié à Sofia Sartor</li>
                    </ul>
                </div>
                <div class="card">
                    <h2>Compétences & Intérêts</h2>
                    <ul id="competences-list" class="details-list">
                        <h3>Combat</h3>
                        <li>🗡️ Maîtrise des lames (épée, dague, lame secrète)</li>
                        <li>👊 Combat à mains nues</li>
                        <h3>Aptitudes</h3>
                        <li>🦅 Vision d'aigle</li>
                        <li>🧗 Parkour & Alpinisme urbain</li>
                        <li>🤫 Discrétion & Infiltration</li>
                        <h3>Savoirs</h3>
                        <li>💰 Gestion & Finance</li>
                        <li>🏛️ Architecture</li>
                        <li>📜 Histoire & Cryptographie</li>
                    </ul>
                </div>
                
                <div class="card">
                    <h2>Album Photos</h2>
                    <div class="photo-grid">
                        <img src="https://assets.dragoart.com/images/17671_501/how-to-draw-ezio-auditore_5e4cbf97ead776.53503986_83951_5_4.jpg" alt="Dessin d'Ezio" class="enlargable">
                        <img src="https://i.pinimg.com/474x/e8/89/c7/e889c788fa4881f2943accf361c96630.jpg" alt="Ezio sur un toit" class="enlargable">
                        <img src="https://i.pinimg.com/236x/6a/e6/02/6ae60295edc85dd46a58f1ab631023cb.jpg" alt="Portrait d'Ezio Auditore" class="enlargable">
                        <img src="https://i.pinimg.com/736x/b3/b5/b6/b3b5b6d9f088412a0067d8a4998275f9.jpg" alt="Ezio en action" class="enlargable">
                    </div>
                </div>

                <div class="card">
                    <h2>Pages Aimées</h2>
                    <ul class="liked-pages-list">
                        <li class="liked-page-item">
                            <img src="https://www.meisterdrucke.fr/kunstwerke/400px/English_School_-_Leonardo_da_Vinci_-_(MeisterDrucke-60848).jpg" alt="L'Atelier de Leonardo">
                            <div class="page-info">
                                <span class="page-name">L'Atelier de Leonardo</span>
                                <span class="page-category">Artiste & Inventeur</span>
                            </div>
                        </li>
                        <li class="liked-page-item">
                            <img src="https://s3.eu-west-3.amazonaws.com/bellehome.fr/1736872215_Quest-ce-que-larchitecture-de-la-Renaissance-1536x1024.jpg" alt="Architectes d'Italie">
                            <div class="page-info">
                                <span class="page-name">Architectes d'Italie</span>
                                <span class="page-category">Artisanat & Construction</span>
                            </div>
                        </li>
                         <li class="liked-page-item">
                            <img src="https://assets.mycast.io/actor_images/actor-la-volpe-330854_large.jpg?1640326745" alt="La Guilde des Voleurs">
                            <div class="page-info">
                                <span class="page-name">La Guilde des Voleurs</span>
                                <span class="page-category">Organisation</span>
                            </div>
                        </li>
                        <li class="liked-page-item">
                            <img src="https://magazzino.be/cdn/shop/files/DEC03_20240304_111548_1946x.jpg?v=1709636955" alt="Vins de Toscane">
                            <div class="page-info">
                                <span class="page-name">Vins de Toscane</span>
                                <span class="page-category">Produit/Service</span>
                            </div>
                        </li>
                    </ul>
                </div>

            </aside>

            <section class="right-column">
                <div class="card friends-card">
                    <h2>Amis les plus proches</h2>
                    <div class="friends-grid">
                        <div class="friend-item">
                             <img src="https://www.meisterdrucke.fr/kunstwerke/400px/English_School_-_Leonardo_da_Vinci_-_(MeisterDrucke-60848).jpg" alt="Leonardo">
                             <div class="friend-name">Leonardo da Vinci</div>
                        </div>
                        <div class="friend-item">
                             <img src="https://upload.wikimedia.org/wikipedia/commons/2/27/Santi_di_Tito_-_Niccolo_Machiavelli%27s_portrait_headcrop.jpg" alt="Machiavelli">
                             <div class="friend-name">Niccolò Machiavelli</div>
                        </div>
                        <div class="friend-item">
                             <img src="https://static.nationalgeographic.fr/files/styles/image_3200/public/caterina.jpg?w=400&h=400&q=75" alt="Caterina">
                             <div class="friend-name">Caterina Sforza</div>
                        </div>
                        <div class="friend-item">
                             <img src="https://assets.mycast.io/actor_images/actor-la-volpe-330854_large.jpg?1640326745" alt="La Volpe">
                             <div class="friend-name">La Volpe</div>
                        </div>
                        <div class="friend-item">
                             <img src="https://static1.personalitydatabase.net/2/pdb-images-prod/aef3ad8/profile_images/f74fe76c1432457b84251d64e2489769.png" alt="Bartolomeo">
                             <div class="friend-name">Bartolomeo d'Alviano</div>
                        </div>
                         <div class="friend-item">
                             <img src="https://pbs.twimg.com/profile_images/3102300685/e65273cad2142943e8075e3b8b6fafec_400x400.jpeg" alt="Yusuf">
                             <div class="friend-name">Yusuf Tazim</div>
                        </div>
                        <div class="friend-item">
                             <img src="https://assets.mycast.io/characters/sofia-sartor-281021-normal.jpg?1569491821" alt="Sofia">
                             <div class="friend-name">Sofia Sartor</div>
                        </div>
                         <div class="friend-item">
                             <img src="https://static1.personalitydatabase.net/2/pdb-images-prod/2202938f/profile_images/dfaf0df3a5ba4cfe8e6c23648a72e4a5.png" alt="Claudia">
                             <div class="friend-name">Claudia Auditore</div>
                        </div>
                        <div class="friend-item">
                             <img src="https://img.kupigolos.ru/hero/61711af8960ba.jpg?p=bh&s=c4fc791f0990f38fb16ab6130931a892" alt="Mario">
                             <div class="friend-name">Mario Auditore</div>
                        </div>
                        <div class="friend-item">
                             <img src="https://assets.mycast.io/actor_images/actor-paola-assassin-s-creed-331281_large.jpg?1640380276" alt="Paola">
                             <div class="friend-name">Paola</div>
                        </div>
                        <div class="friend-item">
                             <img src="https://www.postavy.cz/foto/antonio-de-magianis-foto.jpg" alt="Antonio">
                             <div class="friend-name">Antonio de Magianis</div>
                        </div>
                        <div class="friend-item">
                             <img src="https://assets.mycast.io/actor_images/actor-teodora-contanto-331316_large.jpg?1640386939" alt="Teodora">
                             <div class="friend-name">Teodora Contanto</div>
                        </div>
                    </div>
                </div>
                
                </section>
        </main>
    </div>
    
    <div id="chat-fab">
       <svg fill="#f5f0e1" xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><style>svg{fill:#f5f0e1}</style><path d="M256 0C114.6 0 0 114.6 0 256S114.6 256 256 256 512 399.4 512 256 399.4 0 256 0zM256 464c-114.7 0-208-93.3-208-208S141.3 48 256 48s208 93.3 208 208-93.3 208-208 208zm-80-176c-9.4-4.2-20.1-2.4-27.5 4.9s-9.1 18.2-4.9 27.5l48 106.7c3.2 7.1 10.4 11.2 18.2 11.2s14.9-4.2 18.2-11.2l48-106.7c4.2-9.4 2.4-20.1-4.9-27.5s-18.2-9.1-27.5-4.9L256 198.7l-80 37.3zM256 288c-17.7 0-32 14.3-32 32s14.3 32 32 32 32-14.3 32-32-14.3-32-32-32z"/></svg>
    </div>

    <div id="chat-modal" style="display: none;">
        <div class="chat-window">
            <div class="chat-header">
                <h2>Parler à Ezio</h2>
                <button class="chat-close-btn">&times;</button>
            </div>
            <div class="chat-messages">
                <div class="message ezio">Salute ! Que puis-je faire pour vous ?</div>
            </div>
            <form class="chat-input-form">
                <input type="text" placeholder="Posez votre question..." required>
                <button type="submit">→</button>
            </form>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- GESTION DES BOUTONS "J'AIME" ---
            document.body.addEventListener('click', function(e) {
                if (e.target.matches('.like-btn')) {
                    e.target.classList.toggle('liked');
                    if (e.target.classList.contains('liked')) {
                        e.target.innerHTML = '❤️ Aimé';
                    } else {
                        e.target.innerHTML = '❤️ J\'aime';
                    }
                }
                if (e.target.matches('.comment-like-btn')) {
                    e.target.classList.toggle('liked');
                    if (e.target.classList.contains('liked')) {
                        e.target.textContent = '👍 Aimé';
                    } else {
                        e.target.textContent = '👍 Aimer';
                    }
                }
            });

            // --- GESTION DES BOUTONS "COMMENTER" ET "RÉPONDRE" ---
            document.body.addEventListener('click', function(e) {
                if (e.target.matches('.comment-btn')) {
                    const postActions = e.target.closest('.post-actions');
                    const commentBox = postActions.nextElementSibling;
                    if (commentBox && commentBox.matches('.comment-box')) {
                        commentBox.style.display = (commentBox.style.display === 'block') ? 'none' : 'block';
                    }
                }
                if (e.target.matches('.comment-reply-btn')) {
                    const commentBody = e.target.closest('.comment-body');
                    const replyContainer = commentBody.querySelector('.comment-reply-container');
                    if (replyContainer) {
                        replyContainer.style.display = (replyContainer.style.display === 'block') ? 'none' : 'block';
                    }
                }
            });

            // --- GESTION DES BOUTONS "TRADUIRE" ---
            document.body.addEventListener('click', function(e) {
                if (e.target.matches('.translate-btn')) {
                    const postContentP = e.target.closest('.post').querySelector('.post-content p');
                    const originalText = postContentP.dataset.originalFr;
                    const translatedText = postContentP.dataset.translationIt;

                    if (e.target.textContent === 'Traduction originale') {
                        postContentP.innerHTML = translatedText;
                        e.target.textContent = 'Voir en français';
                    } else {
                        postContentP.innerHTML = originalText;
                        e.target.textContent = 'Traduction originale';
                    }
                }
                if (e.target.matches('.translate-comment-btn')) {
                    const commentSpan = e.target.previousElementSibling;
                    if (commentSpan && commentSpan.tagName === 'SPAN') {
                        const originalText = commentSpan.dataset.originalFr;
                        const translatedText = commentSpan.dataset.translationIt;
                        if (e.target.textContent === 'Traduction originale') {
                            commentSpan.textContent = translatedText;
                            e.target.textContent = 'Français';
                        } else {
                            commentSpan.textContent = originalText;
                            e.target.textContent = 'Traduction originale';
                        }
                    }
                }
            });

            // --- GESTION DES BOUTONS "AJOUTER" ET "SUIVRE" ---
            const addFriendBtn = document.getElementById('add-friend-btn');
            const followBtn = document.getElementById('follow-btn');
            if(addFriendBtn) {
                addFriendBtn.addEventListener('click', function() {
                    this.textContent = '✅ Ajouté';
                    this.classList.add('toggled');
                    this.disabled = true;
                });
            }
            if(followBtn) {
                followBtn.addEventListener('click', function() {
                    this.textContent = '✓ Suivi';
                    this.classList.add('toggled');
                    this.disabled = true;
                });
            }
            
            // --- GESTION DE L'AGRANDISSEMENT DES IMAGES (LIGHTBOX) ---
            const lightboxModal = document.getElementById('lightbox-modal');
            const lightboxImg = document.getElementById('lightbox-img');
            const enlargableImages = document.querySelectorAll('.enlargable');
            
            enlargableImages.forEach(img => {
                img.addEventListener('click', function() {
                    lightboxModal.style.display = "block";
                    lightboxImg.src = this.src;
                });
            });

            const closeLightbox = document.querySelector('.lightbox-close');
            if(closeLightbox) {
                closeLightbox.onclick = function() { 
                    lightboxModal.style.display = "none";
                }
            }
            
            // --- SCRIPT POUR LE CHAT AVEC L'IA ---
            const chatFab = document.getElementById('chat-fab');
            const chatModal = document.getElementById('chat-modal');
            const closeBtn = document.querySelector('.chat-close-btn');
            const chatForm = document.querySelector('.chat-input-form');
            const chatMessages = document.querySelector('.chat-messages');
            
            const GEMINI_API_KEY = "VOTRE_CLE_API_GEMINI_ICI"; 

            chatFab.addEventListener('click', () => {
                chatModal.style.display = 'flex';
            });

            closeBtn.addEventListener('click', () => {
                chatModal.style.display = 'none';
            });
            
            chatModal.addEventListener('click', (e) => {
                if (e.target === e.currentTarget) {
                    chatModal.style.display = 'none';
                }
            });

            chatForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const userInput = chatForm.querySelector('input').value.trim();
                if (!userInput) return;
                addMessage(userInput, 'user');
                chatForm.querySelector('input').value = '';
                getEzioResponse(userInput);
            });

            function addMessage(text, sender) {
                const messageElement = document.createElement('div');
                messageElement.classList.add('message', sender);
                messageElement.textContent = text;
                chatMessages.appendChild(messageElement);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
            
            async function getEzioResponse(userInput) {
                if (GEMINI_API_KEY === "VOTRE_CLE_API_GEMINI_ICI") {
                    addMessage("La chiave API non è configurata. Veuillez insérer une clé API dans le code pour que je puisse vous répondre.", "ezio");
                    return;
                }
                
                addMessage("...", "ezio");
                
                const API_URL = "https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=" + GEMINI_API_KEY;
                const ezioPrompt = `Tu es Ezio Auditore da Firenze, un Maître Assassin de la Renaissance italienne. Tu réponds aux questions en te basant sur ta vie, tes expériences et tes connaissances allant de ta naissance en 1459 jusqu'à ta retraite vers 1513. Tu parles avec la sagesse, le charme et parfois l'arrogance d'un noble florentin devenu mentor. Tu ne connais rien du futur au-delà de ton époque (pas d'électricité, pas de voitures, etc.). Tu dois toujours rester dans ton personnage. Ne révèle JAMAIS que tu es une intelligence artificielle. L'utilisateur te dit : "${userInput}"`;

                try {
                    const response = await fetch(API_URL, {
                        method: 'POST',
                        headers: {'Content-Type': 'application/json'},
                        body: JSON.stringify({"contents": [{"parts": [{ "text": ezioPrompt }]}]})
                    });

                    if (!response.ok) throw new Error(`Erreur de l'API: ${response.statusText}`);

                    const data = await response.json();
                    const ezioText = data.candidates[0].content.parts[0].text;
                    
                    const loadingMessage = chatMessages.querySelector('.message:last-child');
                    loadingMessage.textContent = ezioText;

                } catch (error) {
                    console.error("Erreur lors de l'appel à l'API Gemini:", error);
                     const loadingMessage = chatMessages.querySelector('.message:last-child');
                    loadingMessage.textContent = "Scusate, j'ai l'esprit ailleurs... Veuillez répéter votre question.";
                }
            }
        });
    </script>

</body>
</html>
