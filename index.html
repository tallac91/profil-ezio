<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cronaca | Profil de Ezio Auditore</title>
    <style>
        /* --- Polices & Couleurs Inspirées de la Renaissance --- */
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Lora:ital,wght@0,400;0,600;1,400&display=swap');

        :root {
            --font-main: 'Lora', serif;
            --font-headings: 'Cinzel', serif;
            --color-parchment: #f5f0e1;
            --color-dark-text: #3d2b1f;
            --color-red-accent: #8a0303;
            --color-border: #d4c5a5;
            --color-card-bg: #fffbf2;
            --color-interactive: #5a4b3c;
        }

        /* --- Style Général de la Page --- */
        body {
            font-family: var(--font-main);
            background-color: var(--color-parchment);
            color: var(--color-dark-text);
            margin: 0;
            padding: 0;
            font-size: 16px;
            line-height: 1.6;
        }

        .container {
            max-width: 1000px;
            margin: 20px auto;
            padding: 0 15px;
        }

        h1, h2, h3 {
            font-family: var(--font-headings);
            color: var(--color-red-accent);
            font-weight: 700;
        }
        
        h3 {
            font-size: 1.1em;
            margin-top: 15px;
            margin-bottom: 10px;
            color: var(--color-dark-text);
            border-bottom: 1px solid var(--color-border);
            padding-bottom: 5px;
        }

        /* --- En-tête du Profil --- */
        .profile-header {
            background-color: var(--color-card-bg);
            border: 1px solid var(--color-border);
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .cover-photo {
            height: 250px;
            background: url('https://via.placeholder.com/1000x250/6e5b4a/ffffff?text=Vue+de+Monteriggioni') no-repeat center center;
            background-size: cover;
            border-radius: 8px 8px 0 0;
        }

        .profile-info {
            display: flex;
            align-items: center;
            padding: 0 20px 20px;
            margin-top: -80px;
            position: relative;
        }

        .profile-pic {
            width: 160px;
            height: 160px;
            border-radius: 50%;
            border: 5px solid var(--color-parchment);
            margin-right: 20px;
            object-fit: cover;
        }

        .profile-name h1 {
            margin: 0;
            font-size: 2.5em;
        }

        .profile-name .bio {
            font-style: italic;
            margin: 0;
            color: var(--color-dark-text);
            font-size: 1.1em;
        }
        
        .profile-name .bio-translation {
            font-style: normal;
            margin: 5px 0 0 0;
            color: var(--color-interactive);
            font-size: 0.85em;
        }

        /* --- Contenu Principal (deux colonnes) --- */
        .main-content {
            display: flex;
            gap: 20px;
        }

        .left-column {
            flex: 0 0 320px;
        }

        .right-column {
            flex: 1;
        }

        /* --- Cartes de Contenu (Détails, Amis, Posts) --- */
        .card {
            background-color: var(--color-card-bg);
            border: 1px solid var(--color-border);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .card h2 {
            margin-top: 0;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--color-border);
        }

        /* --- Section Détails et Compétences --- */
        .details-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .details-list li {
            margin-bottom: 10px;
        }

        .details-list strong {
            color: var(--color-red-accent);
        }

        #competences-list li {
            margin-bottom: 5px;
            padding-left: 10px;
        }

        /* --- Section Amis --- */
        .friends-card .friends-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 20px;
        }

        .friends-card .friend-item {
            text-align: center;
        }

        .friends-card .friend-item img {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: 3px solid var(--color-border);
            object-fit: cover;
            transition: transform 0.2s;
        }
        
        .friends-card .friend-item img:hover {
            transform: scale(1.1);
        }

        .friends-card .friend-item .friend-name {
            font-size: 0.9em;
            font-weight: 600;
            margin-top: 5px;
        }
        
        /* --- Section Fil d'actualité --- */
        .post {
            background-color: var(--color-card-bg);
            border: 1px solid var(--color-border);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .post-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .post-author-pic {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            margin-right: 15px;
            object-fit: cover;
        }
        
        .post-author-name {
            font-weight: bold;
            font-family: var(--font-headings);
        }

        .post-date {
            font-size: 0.8em;
            color: #777;
        }
        
        .post-location {
            font-weight: bold;
        }

        .post-content p {
            margin-top: 0;
            margin-bottom: 10px;
        }
        
        .translate-btn {
            background: none;
            border: none;
            color: var(--color-interactive);
            font-size: 0.8em;
            font-style: italic;
            cursor: pointer;
            padding: 0;
            margin-bottom: 10px;
            text-decoration: underline;
        }

        .translate-btn:hover {
            color: var(--color-red-accent);
        }
        
        /* --- Boutons J'aime/Commenter --- */
        .post-actions {
            display: flex;
            gap: 10px;
            padding: 10px 0;
            border-top: 1px solid var(--color-border);
            border-bottom: 1px solid var(--color-border);
        }
        
        .action-btn {
            background: none;
            border: none;
            cursor: pointer;
            font-family: var(--font-main);
            font-weight: bold;
            font-size: 0.9em;
            color: var(--color-interactive);
            padding: 5px 10px;
            border-radius: 5px;
            transition: background-color 0.2s;
        }
        
        .action-btn:hover {
            background-color: var(--color-parchment);
        }
        
        .like-btn.liked {
            color: var(--color-red-accent);
        }

        .post-comments {
            margin-top: 15px;
        }

        .comment-thread {
            border-bottom: 1px solid var(--color-border);
            padding-bottom: 12px;
            margin-bottom: 12px;
        }
        .comment-thread:last-child {
            border-bottom: none;
            padding-bottom: 0;
            margin-bottom: 0;
        }
        
        .comment {
            display: flex;
            align-items: flex-start;
            font-size: 0.9em;
            margin-bottom: 8px;
        }
        
        .comment-author-pic {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            margin-right: 10px;
            object-fit: cover;
            flex-shrink: 0;
        }
        
        .comment strong {
            color: var(--color-red-accent);
        }
        
        .translate-comment-btn {
             background: none;
             border: none;
             font-size: 0.8em;
             color: var(--color-interactive);
             cursor: pointer;
             text-decoration: underline;
             padding-left: 5px;
             font-style: italic;
        }
        
        .comment-reply {
            display: flex;
            align-items: flex-start;
            margin-left: 45px;
            margin-top: 10px;
            margin-bottom: 10px;
            padding-top: 10px;
            border-top: 1px dashed var(--color-border);
            font-size: 0.9em;
        }
        
        .reply-author-pic {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            margin-right: 10px;
        }
        
        .comment-reply strong {
            color: var(--color-red-accent);
            display: block;
        }
        
        /* --- Champ de commentaire caché --- */
        .comment-box {
            display: none; /* Caché par défaut */
            margin-top: 15px;
        }
        
        .comment-box textarea {
            width: 100%;
            box-sizing: border-box;
            border: 1px solid var(--color-border);
            border-radius: 5px;
            padding: 10px;
            font-family: var(--font-main);
            background-color: #fff;
            min-height: 60px;
            resize: vertical;
        }

        .comment-box button {
            background-color: var(--color-red-accent);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-family: var(--font-headings);
            margin-top: 10px;
            display: block;
            margin-left: auto;
        }
        
        .comment-box button:hover {
            opacity: 0.9;
        }
        
        /* --- STYLES POUR LE CHAT AVEC L'IA --- */
        #chat-fab {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background-color: var(--color-red-accent);
            border-radius: 50%;
            border: 2px solid var(--color-parchment);
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            transition: transform 0.2s ease-in-out;
        }

        #chat-fab:hover {
            transform: scale(1.1);
        }

        #chat-fab svg {
            width: 32px;
            height: 32px;
            fill: var(--color-parchment);
        }

        #chat-modal {
            display: none;
            position: fixed;
            z-index: 999;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            display: none;
            justify-content: center;
            align-items: center;
        }

        .chat-window {
            width: 90%;
            max-width: 400px;
            height: 80vh;
            max-height: 600px;
            background-color: var(--color-parchment);
            border: 2px solid var(--color-border);
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.4);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            font-family: var(--font-main);
        }

        .chat-header {
            padding: 15px;
            background-color: var(--color-card-bg);
            border-bottom: 1px solid var(--color-border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-header h2 {
            margin: 0;
            font-size: 1.2em;
        }
        
        .chat-close-btn {
            font-size: 1.5em;
            cursor: pointer;
            background: none;
            border: none;
            color: var(--color-interactive);
        }
        
        .chat-messages {
            flex-grow: 1;
            padding: 15px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }
        
        .message {
            max-width: 80%;
            padding: 10px 15px;
            border-radius: 15px;
            margin-bottom: 10px;
            line-height: 1.4;
        }

        .message.user {
            background-color: #e1e1e1;
            align-self: flex-end;
            border-bottom-right-radius: 3px;
        }
        
        .message.ezio {
            background-color: var(--color-card-bg);
            border: 1px solid var(--color-border);
            align-self: flex-start;
            border-bottom-left-radius: 3px;
        }

        .chat-input-form {
            display: flex;
            padding: 10px;
            border-top: 1px solid var(--color-border);
            background-color: var(--color-card-bg);
        }

        .chat-input-form input {
            flex-grow: 1;
            border: 1px solid var(--color-border);
            border-radius: 20px;
            padding: 10px 15px;
            font-family: var(--font-main);
            font-size: 1em;
        }
        
        .chat-input-form button {
            background-color: var(--color-red-accent);
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            margin-left: 10px;
            cursor: pointer;
            color: white;
            font-size: 1.2em;
        }

    </style>
</head>
<body>

    <div class="container">
        <header class="profile-header">
            <div class="cover-photo"></div>
            <div class="profile-info">
                <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRrtuXJl9rlAVu6swHGqy8qvW-ldqFAwG1aBw&s" alt="Portrait de Ezio Auditore" class="profile-pic">
                <div class="profile-name">
                    <h1>Ezio Auditore da Firenze</h1>
                    <p class="bio">"Nobile Fiorentino, Assassino e Mentore dell'Ordine."</p>
                    <p class="bio-translation">(Noble Florentin, Assassin et Mentor de l'Ordre.)</p>
                </div>
            </div>
        </header>

        <main class="main-content">
            <aside class="left-column">
                <div class="card">
                    <h2>Détails Personnels</h2>
                    <ul class="details-list">
                        <li><strong>Né le:</strong> 24 juin 1459</li>
                        <li><strong>Origine:</strong> Florence, République Florentine</li>
                        <li><strong>Résidence:</strong> Villa Auditore | Île Tibérine</li>
                        <li><strong>Profession:</strong> Maître Assassin</li>
                        <li><strong>Famille:</strong> Maison Auditore</li>
                        <li><strong>Situation:</strong> Marié à Sofia Sartor</li>
                    </ul>
                </div>
                <div class="card">
                    <h2>Compétences & Intérêts</h2>
                    <ul id="competences-list" class="details-list">
                        <h3>Combat</h3>
                        <li>🗡️ Maîtrise des lames (épée, dague, lame secrète)</li>
                        <li>👊 Combat à mains nues</li>
                        <h3>Aptitudes</h3>
                        <li>🦅 Vision d'aigle</li>
                        <li>🧗 Parkour & Alpinisme urbain</li>
                        <li>🤫 Discrétion & Infiltration</li>
                        <h3>Savoirs</h3>
                        <li>💰 Gestion & Finance</li>
                        <li>🏛️ Architecture</li>
                        <li>📜 Histoire & Cryptographie</li>
                    </ul>
                </div>
            </aside>

            <section class="right-column">
                <div class="card friends-card">
                    <h2>Amis les plus proches</h2>
                    <div class="friends-grid">
                        <div class="friend-item">
                             <img src="https://www.meisterdrucke.fr/kunstwerke/400px/English_School_-_Leonardo_da_Vinci_-_(MeisterDrucke-60848).jpg" alt="Leonardo">
                             <div class="friend-name">Leonardo da Vinci</div>
                        </div>
                        <div class="friend-item">
                             <img src="https://upload.wikimedia.org/wikipedia/commons/2/27/Santi_di_Tito_-_Niccolo_Machiavelli%27s_portrait_headcrop.jpg" alt="Machiavelli">
                             <div class="friend-name">Niccolò Machiavelli</div>
                        </div>
                        <div class="friend-item">
                             <img src="https://static.nationalgeographic.fr/files/styles/image_3200/public/caterina.jpg?w=400&h=400&q=75" alt="Caterina">
                             <div class="friend-name">Caterina Sforza</div>
                        </div>
                        <div class="friend-item">
                             <img src="https://assets.mycast.io/actor_images/actor-la-volpe-330854_large.jpg?1640326745" alt="La Volpe">
                             <div class="friend-name">La Volpe</div>
                        </div>
                        <div class="friend-item">
                             <img src="https://static1.personalitydatabase.net/2/pdb-images-prod/aef3ad8/profile_images/f74fe76c1432457b84251d64e2489769.png" alt="Bartolomeo">
                             <div class="friend-name">Bartolomeo d'Alviano</div>
                        </div>
                         <div class="friend-item">
                             <img src="https://pbs.twimg.com/profile_images/3102300685/e65273cad2142943e8075e3b8b6fafec_400x400.jpeg" alt="Yusuf">
                             <div class="friend-name">Yusuf Tazim</div>
                        </div>
                        <div class="friend-item">
                             <img src="https://assets.mycast.io/characters/sofia-sartor-281021-normal.jpg?1569491821" alt="Sofia">
                             <div class="friend-name">Sofia Sartor</div>
                        </div>
                         <div class="friend-item">
                             <img src="https://static1.personalitydatabase.net/2/pdb-images-prod/2202938f/profile_images/dfaf0df3a5ba4cfe8e6c23648a72e4a5.png" alt="Claudia">
                             <div class="friend-name">Claudia Auditore</div>
                        </div>
                    </div>
                </div>
                
                </section>
        </main>
    </div>
    
    <div id="chat-fab">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M224 0c-17.7 0-32 14.3-32 32V51.2C119 66 64 130.6 64 208v25.4c0 45.4-15.5 89.5-43.8 124.9L5.3 373.1C-7.4 389.1-1.5 416 19.9 416H428.1c21.4 0 27.3-26.9 14.6-42.9L327.8 358.3C299.5 322.9 284 278.8 284 233.4V208c0-77.4-55-142-128-156.8V32c0-17.7-14.3-32-32-32zM224 448a64 64 0 1 0 0-128 64 64 0 1 0 0 128z"/></svg>
    </div>

    <div id="chat-modal">
        <div class="chat-window">
            <div class="chat-header">
                <h2>Parler à Ezio</h2>
                <button class="chat-close-btn">&times;</button>
            </div>
            <div class="chat-messages">
                <div class="message ezio">Salute ! Que puis-je faire pour vous ?</div>
            </div>
            <form class="chat-input-form">
                <input type="text" placeholder="Posez votre question..." required>
                <button type="submit">→</button>
            </form>
        </div>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- GESTION DES BOUTONS "J'AIME" ---
            const likeButtons = document.querySelectorAll('.like-btn');
            
            likeButtons.forEach(button => {
                button.addEventListener('click', function() {
                    this.classList.toggle('liked');
                    if (this.classList.contains('liked')) {
                        this.innerHTML = '❤️ Aimé';
                    } else {
                        this.innerHTML = '❤️ J\'aime';
                    }
                });
            });

            // --- GESTION DES BOUTONS "COMMENTER" ---
            const commentButtons = document.querySelectorAll('.comment-btn');

            commentButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const post = this.closest('.post');
                    const commentBox = post.querySelector('.comment-box');
                    if (commentBox.style.display === 'block') {
                        commentBox.style.display = 'none';
                    } else {
                        commentBox.style.display = 'block';
                        commentBox.querySelector('textarea').focus();
                    }
                });
            });

            // --- GESTION DES BOUTONS "TRADUIRE" POUR LES POSTS ---
            const translateButtons = document.querySelectorAll('.translate-btn');

            translateButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const postContentP = this.closest('.post').querySelector('.post-content p');
                    const originalText = postContentP.dataset.originalFr;
                    const translatedText = postContentP.dataset.translationIt;

                    if (this.textContent === 'Traduire en italien') {
                        postContentP.innerHTML = translatedText;
                        this.textContent = 'Voir en français';
                    } else {
                        postContentP.innerHTML = originalText;
                        this.textContent = 'Traduire en italien';
                    }
                });
            });

            // --- GESTION DES BOUTONS "TRADUIRE" POUR LES COMMENTAIRES ET RÉPONSES ---
            const translateCommentButtons = document.querySelectorAll('.translate-comment-btn');

            translateCommentButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const commentSpan = this.previousElementSibling;
                    
                    if (commentSpan && commentSpan.tagName === 'SPAN') {
                        const originalText = commentSpan.dataset.originalFr;
                        const translatedText = commentSpan.dataset.translationIt;

                        if (this.textContent === 'Traduire') {
                            commentSpan.textContent = translatedText;
                            this.textContent = 'Français';
                        } else {
                            commentSpan.textContent = originalText;
                            this.textContent = 'Traduire';
                        }
                    }
                });
            });
            
            // --- NOUVEAU SCRIPT POUR LE CHAT AVEC L'IA ---
            const chatFab = document.getElementById('chat-fab');
            const chatModal = document.getElementById('chat-modal');
            const closeBtn = document.querySelector('.chat-close-btn');
            const chatForm = document.querySelector('.chat-input-form');
            const chatMessages = document.querySelector('.chat-messages');
            
            // ==================================================================================
            // === 🚨 ATTENTION : INSÉREZ VOTRE CLÉ API GEMINI CI-DESSOUS 🚨 ===
            // ==================================================================================
            const GEMINI_API_KEY = "VOTRE_CLE_API_GEMINI_ICI"; 
            // ==================================================================================
            // === AVERTISSEMENT : NE PARTAGEZ JAMAIS CE FICHIER AVEC LA CLÉ PUBLIQUEMENT ===
            // ==================================================================================


            chatFab.addEventListener('click', () => {
                chatModal.style.display = 'flex';
            });

            closeBtn.addEventListener('click', () => {
                chatModal.style.display = 'none';
            });
            
            chatModal.addEventListener('click', (e) => {
                if (e.target === chatModal) {
                    chatModal.style.display = 'none';
                }
            });

            chatForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const userInput = chatForm.querySelector('input').value.trim();
                if (!userInput) return;

                addMessage(userInput, 'user');
                chatForm.querySelector('input').value = '';
                
                getEzioResponse(userInput);
            });

            function addMessage(text, sender) {
                const messageElement = document.createElement('div');
                messageElement.classList.add('message', sender);
                messageElement.textContent = text;
                chatMessages.appendChild(messageElement);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
            
            async function getEzioResponse(userInput) {
                if (GEMINI_API_KEY === "VOTRE_CLE_API_GEMINI_ICI") {
                    addMessage("La chiave API non è configurata. Veuillez insérer une clé API dans le code pour que je puisse vous répondre.", "ezio");
                    return;
                }
                
                addMessage("...", "ezio"); // Indicateur de chargement
                
                const API_URL = "https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=" + GEMINI_API_KEY;

                // Le prompt qui définit la personnalité d'Ezio
                const ezioPrompt = `Tu es Ezio Auditore da Firenze, un Maître Assassin de la Renaissance italienne. Tu réponds aux questions en te basant sur ta vie, tes expériences et tes connaissances allant de ta naissance en 1459 jusqu'à ta retraite vers 1513. Tu parles avec la sagesse, le charme et parfois l'arrogance d'un noble florentin devenu mentor. Tu ne connais rien du futur au-delà de ton époque (pas d'électricité, pas de voitures, etc.). Tu dois toujours rester dans ton personnage. Ne révèle JAMAIS que tu es une intelligence artificielle. L'utilisateur te dit : "${userInput}"`;

                try {
                    const response = await fetch(API_URL, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            "contents": [{
                                "parts": [{ "text": ezioPrompt }]
                            }]
                        })
                    });

                    if (!response.ok) {
                        throw new Error(`Erreur de l'API: ${response.statusText}`);
                    }

                    const data = await response.json();
                    const ezioText = data.candidates[0].content.parts[0].text;
                    
                    const loadingMessage = chatMessages.querySelector('.message:last-child');
                    loadingMessage.textContent = ezioText;

                } catch (error) {
                    console.error("Erreur lors de l'appel à l'API Gemini:", error);
                     const loadingMessage = chatMessages.querySelector('.message:last-child');
                    loadingMessage.textContent = "Scusate, j'ai l'esprit ailleurs... Veuillez répéter votre question.";
                }
            }
        });
    </script>

</body>
</html>
